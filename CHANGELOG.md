# 更新日志

## [3.5.0] - 2025-08-26

### 新增

- **OCR逐页保存功能**:
  - 支持将PDF的每一页识别结果单独保存为Markdown和Word文件
  - 文件名格式为 `[文件名][P页码].md` 和 `[文件名][P页码].docx`
  - 文件保存在PDF所在目录的 `[文件名]_md/` 和 `[文件名]_word/` 子目录中
- **OCR合并文件功能**:
  - 在逐页保存的基础上，自动生成合并所有页面的完整Markdown和Word文件
  - 合并文件命名为 `[文件名][完整合并].md` 和 `[文件名][完整合并].docx`
  - 合并文件直接保存在PDF文件所在目录
- **多模式支持**:
  - 逐页保存功能同时支持OpenAI-Compatible模式和Mistral API模式

### 修复

- **路径问题**: 修复了逐页保存目录被创建在临时文件夹而非PDF所在目录的问题
- **兼容性问题**: 修复了OpenAI-Compatible模式下pdf_path为None导致逐页保存失效的问题

## [3.4.5] - 2025-08-19

### 优化

- **OCR重试机制**: 改进了OCR识别的重试逻辑，当API返回内容为空时会自动重试，重试限制为三次，提高了OCR识别的稳定性和准确性。

## [3.4.2] - 2025-08-06

### 新增

- **OCR 文件名**: OCR 识别后生成的 Markdown 和 Word 文件名中加入了所使用的 API 模型和生成时间。

## [3.4.1] - 2025-08-06

### 优化

- **OCR转换**: 在将Markdown转换为Word文档时，启用Pandoc的`hard_line_breaks`扩展，确保Markdown中的软换行能够被正确地转换成Word中的换行。

## [3.4.0] - 2025-07-28

### 新增

- **OCR温度参数控制**: 在OCR配置中添加了温度参数设置，用户可以通过滑块控件调节AI模型的输出随机性（范围0.0-2.0，默认值1.0）。
- **OpenAI兼容模型支持**: 温度参数仅在OpenAI兼容模式下显示，Mistral API模式下自动隐藏该设置。

## [3.3.0] - 2025-07-26

### 新增

- **OCR预览功能**: 实现了OCR识别过程中每页完成后的实时预览功能，用户可以即时查看识别结果。

### 修复

- **OCR属性错误**: 修复了 `core/ocr.py` 中的 `AttributeError: 'list' object has no attribute 'get'` 错误。

### 优化

- **OCR预览显示**: 修改了OCR预览功能，使其只显示当前页的内容，而不是累积显示所有页面的内容，提高了预览的准确性。
- **OCR界面优化**: 删除了OCR标签页中冗余的"保存结果"按钮及其相关的代码，因为OCR结果现在会自动保存为.md和.docx文件，简化了用户操作。

## [3.2.2] - 2025-07-25

### 修复

- **OCR公式转换**:
    - 解决了AI模型将LaTeX公式错误地放入代码块中，导致Pandoc无法正确转换为DOCX的问题。
    - 通过**优化AI提示词**和**增加代码预处理**的双重保障机制，确保了公式转换的健壮性。
- **依赖导入**:
    - 修复了因新函数未在 `core/__init__.py` 中导出而导致的 `ImportError`。

### 优化

- **用户体验**:
    - 在OCR状态栏中增加了对当前所调用AI模型的明确显示，提升了界面的透明度。

## [2.7.3] - 2025-06-25

### 新增

- **文件列表功能增强**:
    - 新增"移至顶部"和"移至底部"快捷命令
    - 支持多选文件的批量移动
    - 改进了文件列表的拖拽排序功能

### 修复

- **文件列表操作修复**:
    - 修复了"打开所在文件夹"功能不正常的问题
    - 修复了"下移"功能在特定情况下的错误
    - 修复了多选文件移动时的位置计算问题

### 变更

- **依赖管理更新**:
    - 从 pip 切换到 uv 进行依赖管理
    - 更新了安装和运行说明文档

## [2.7.0] - 2025-06-24

### 新增

- **PDF 书签功能**: 
    - 支持为 PDF 文件添加书签
    - 支持批量添加书签
    - 支持为多个文件使用相同的书签配置
    - 支持书签配置的导入导出
    - 支持书签的编辑和预览

### 优化

- **书签功能**:
    - 优化了书签的添加逻辑，确保正确跳转
    - 改进了书签的存储和读取机制
    - 添加了书签编辑界面的用户提示

## [2.6.0] - 2025-06-23

### 新增

- **PDF 分割功能**: 用户现在可以将一个多页的 PDF 文件按页分割成多个独立的 PDF 文件。
- **PDF 转图片功能**: 新增 PDF 转图片功能，支持将 PDF 的每一页转换为 JPG 或 PNG 格式，并可以自定义分辨率 (DPI)。
- **UI 增强**:
    - 主界面更新为标签页导航，分别对应优化、合并、分割、转图片和转曲五大功能。
    - 为所有功能模块添加了文件拖放支持。

### 变更

- **README 更新**: 同步更新了 `README.md` 和 `readme_cn.md` 文件，加入了新功能的介绍和使用说明。
- **技术栈更新**: 在文档中加入了 `PyMuPDF` 作为新的项目依赖。

## [1.0.0] - 2025-06-21

### 新增

- **PDF 优化**:
    - 支持三种优化级别（低、中、高）。
    - 提供 `Pikepdf` 和 `Ghostscript` 两种优化引擎。
- **PDF 合并**:
    - 支持合并多个 PDF 文件。
    - 可通过拖拽调整文件合并顺序。
    - 提供 `Pikepdf` 和 `Ghostscript` 两种合并引擎。
- **PDF 转曲**:
    - 使用 `Ghostscript` 将 PDF 中的字体轮廓化，以保证跨设备显示效果一致。
- **图形用户界面**:
    - 基于 `PySide6` 的初始用户界面。
    - 支持文件选择和拖放。
    - 提供进度显示和结果反馈。